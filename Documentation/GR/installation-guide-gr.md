# Οδηγός Εγκατάστασης

Αυτός ο οδηγός παρέχει λεπτομερείς οδηγίες για την εγκατάσταση της εφαρμογής Secure E-Shop σε τοπικό περιβάλλον ανάπτυξης.

## Προαπαιτούμενα

- Python 3.8 ή νεότερη έκδοση
- Git
- OpenSSL για τη δημιουργία πιστοποιητικών
- (Προαιρετικά) Ένας λογαριασμός Gmail για τη λειτουργικότητα email

## Βήμα 1: Κλωνοποίηση του Αποθετηρίου

```bash
git clone <repository-url>
cd secure-eshop
```

## Βήμα 2: Ρύθμιση Περιβάλλοντος Python

Δημιουργία και ενεργοποίηση εικονικού περιβάλλοντος:

```bash
# Δημιουργία εικονικού περιβάλλοντος
python -m venv venv

# Ενεργοποίηση εικονικού περιβάλλοντος
# Σε Windows:
venv\Scripts\activate
# Σε macOS/Linux:
source venv/bin/activate
```

## Βήμα 3: Εγκατάσταση Εξαρτήσεων

Εγκατάσταση όλων των απαιτούμενων πακέτων:

```bash
pip install -r requirements.txt
```

## Βήμα 4: Δημιουργία Καταλόγου Καταγραφής

Βεβαιωθείτε ότι υπάρχει ο κατάλογος καταγραφής:

```bash
mkdir -p logs
touch logs/app.log
```

## Βήμα 5: Ρύθμιση Μεταβλητών Περιβάλλοντος (Προαιρετικά)

Δημιουργήστε ένα αρχείο `.env` στο ριζικό κατάλογο του έργου για τη λειτουργικότητα email:

```bash
# Δημιουργία αρχείου .env
touch .env

# Προσθήκη διαμόρφωσης email (επεξεργαστείτε με τα στοιχεία σας)
echo "EMAIL_HOST_USER=youremail@gmail.com" >> .env
echo "EMAIL_HOST_PASSWORD=your-app-password" >> .env
```

Σημείωση: Για το Gmail, θα χρειαστείτε ένα "App Password" αντί του κωδικού του λογαριασμού σας. Μπορείτε να δημιουργήσετε ένα στις ρυθμίσεις ασφαλείας του Google Account σας.

## Βήμα 6: Ρύθμιση της Βάσης Δεδομένων

Εκτέλεση των migrations της βάσης δεδομένων:

```bash
python manage.py migrate
```

## Βήμα 7: Δημιουργία Χρήστη Διαχειριστή

Δημιουργήστε έναν υπερχρήστη για πρόσβαση διαχείρισης:

```bash
python manage.py createsuperuser
```

Ακολουθήστε τις οδηγίες για να δημιουργήσετε το όνομα χρήστη, το email και τον κωδικό πρόσβασης του διαχειριστή.

## Βήμα 8: Ρύθμιση Αυθεντικοποίησης Δύο Παραγόντων για τον Διαχειριστή

Ρυθμίστε το OTP για τον χρήστη διαχειριστή:

```bash
python manage.py add_otp_device admin
```

Αυτό θα δημιουργήσει έναν κωδικό QR στο `admin_qrcode.png` στο ριζικό κατάλογο του έργου, τον οποίο μπορείτε να σαρώσετε με μια εφαρμογή αυθεντικοποίησης όπως το Google Authenticator, το Microsoft Authenticator ή το Authy.

Για περισσότερες λεπτομέρειες, ανατρέξτε στον [Οδηγό Διαχειριστή](ADMIN_GUIDE.md).

## Βήμα 9: Δημιουργία Πιστοποιητικού SSL

Δημιουργήστε ένα αυτο-υπογεγραμμένο πιστοποιητικό SSL για HTTPS:

```bash
mkdir -p config/certificates
openssl req -x509 -newkey rsa:4096 -keyout config/certificates/key.pem -out config/certificates/cert.pem -days 365 -nodes
```

Όταν σας ζητηθεί, παρέχετε τις απαιτούμενες πληροφορίες ή πατήστε Enter για να χρησιμοποιήσετε τις προεπιλογές.

## Βήμα 10: Εκκίνηση του Διακομιστή Ανάπτυξης

Εκκινήστε τον διακομιστή ανάπτυξης με SSL:

```bash
python manage.py runserver_plus --cert-file=config/certificates/cert.pem --key-file=config/certificates/key.pem
```

## Βήμα 11: Πρόσβαση στην Εφαρμογή

Ανοίξτε το πρόγραμμα περιήγησής σας και μεταβείτε στο:
- **Ιστοσελίδα**: https://localhost:8000/
- **Περιβάλλον Διαχείρισης**: https://localhost:8000/admin/ (τώρα προστατεύεται με αυθεντικοποίηση δύο παραγόντων)

## Προειδοποίηση Ασφαλείας Προγράμματος Περιήγησης

Όταν προσπελάσετε για πρώτη φορά τον ιστότοπο, το πρόγραμμα περιήγησής σας θα προειδοποιήσει για το αυτο-υπογεγραμμένο πιστοποιητικό. Αυτό είναι αναμενόμενο κατά την ανάπτυξη. Μπορείτε να συνεχίσετε ως εξής:
- Στο Chrome: Κάντε κλικ στο "Για προχωρημένους" και στη συνέχεια στο "Μετάβαση στο localhost (μη ασφαλές)"
- Στο Firefox: Κάντε κλικ στο "Για προχωρημένους" > "Αποδοχή του κινδύνου και συνέχεια"
- Στο Safari: Κάντε κλικ στο "Εμφάνιση λεπτομερειών" > "επίσκεψη σε αυτόν τον ιστότοπο"

## Αντιμετώπιση Προβλημάτων

- **Προβλήματα Πιστοποιητικού**: Βεβαιωθείτε ότι τα πιστοποιητικά έχουν δημιουργηθεί σωστά και ότι οι διαδρομές ταιριάζουν στην εντολή runserver
- **Σφάλματα Βάσης Δεδομένων**: Δοκιμάστε να διαγράψετε το `db.sqlite3` και να εκτελέσετε ξανά τα migrations
- **Τα Στατικά Αρχεία Δεν Φορτώνονται**: Εκτελέστε `python manage.py collectstatic`
- **Σφάλματα Email**: Ελέγξτε τη διαμόρφωση του `.env` και τις ρυθμίσεις ασφαλείας του Gmail
- **Προβλήματα OTP**: Εάν αντιμετωπίζετε προβλήματα με την αυθεντικοποίηση OTP, μπορείτε να αναδημιουργήσετε τη συσκευή OTP χρησιμοποιώντας την εντολή διαχείρισης

## Συνήθεις Εντολές Ανάπτυξης

```bash
# Εκτέλεση δοκιμών
python manage.py test

# Εκτέλεση συγκεκριμένης δοκιμής
python manage.py test eshop.tests.TestClassName.test_method_name

# Δημιουργία migrations μετά από αλλαγές στο μοντέλο
python manage.py makemigrations eshop

# Εφαρμογή migrations
python manage.py migrate

# Συλλογή στατικών αρχείων
python manage.py collectstatic
```

Για περισσότερες λεπτομέρειες σχετικά με την καθημερινή ανάπτυξη, ανατρέξτε στον [Οδηγό Προγραμματιστή](DEVELOPER_GUIDE.md).
